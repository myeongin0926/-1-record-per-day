# IP

---

## 📌 IP를 공부하게된 계기

사실 요즘 IP라는 단어의 뜻을 자세히는 몰라도 IP라는 단어를 모르는 사람은 없을것이다.

IP추척 이라는 용어에서도 알아볼 수 있듯이 IP는 어떠한 주소를 나타낸다는것을 암시적으로 알 수 있다.

하지만 나는 개발 공부를 하는 입장에서 조금 더 딥한 정보가 궁금해졌다.

IP가 정확히 무엇이며 무엇에 사용되는지. 이러한 궁금증을 품고 IP에 대해 알아보려 한다.

---

## 🔍 IP가 무엇인가?

사람들이 가장 많이하는 착각중 하나는 IP 자체가 주소라고 생각하는것이다.

IP는 인터넷 프로토콜의 줄임말로써 컴퓨터들이 인터넷 상에서 통신하기 위한 규약이다.

말이 조금 어렵다 조금 쉽게 풀어서 설명하자면 IP그 자체는 컴퓨터간의 통신에서의 규칙이라고 할 수 있다.

이 규칙 안에는 주소 체계와, 패킷 전달 방식이 있다.

---

### 🔍 IP 주소

**위에서는 IP가 무엇인가에 대해 알아보았다. 그럼 우리가 IP라고 착각하고 있던 IP주소에 대해 알아보자**

IP주소 체계는 컴퓨터와 네트워크 장치들을 식별하기 위한 주소 체게이다.

통신을 할 때 중요한것은 보내는 사람의 주소와 받는 사람의 주소일것이다. 이 때 IP 주소는 해당 역할을 수행한다.

### 📌 공인 IP와 사설 IP

![스크린샷 2023-06-29 오후 9.32.26.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/bec0f548-cb1d-45a1-8c9f-35b9c0fea9b3/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-29_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_9.32.26.png)

위의 그림을 보면 통신사로부터 받는 공인 IP가 있고 공유기로부터 받는 사설 IP가 있다. 

공인 IP는 집 전체를 대표하는 주소이고, 사설 IP는 집 내부에서 각각의 기기들을 식별하기 위한 주소이다.

**조금 더 쉽게 설명하자면 공인 IP는 우리집의 실제 주소이고, 사설 IP는 집 내부에 있는 방의 주소이다.**

**나를 찾아오기 위해서는 우리집 주소로 온 이후 내 방을 찾아가야 한다.** 

이때 **집 주소 역할을 하는것이 공인 IP이고, 내 방을 나타내는 주소가 바로 사설 IP인것이다.**

---

### 🔍 IP 패킷

IP통신은 IP주소 체계를 통해 **패킷이라는 통신 단위로** 통신을 한다.

![스크린샷 2023-06-29 오후 10.07.09.png](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/42f3519a-1ae9-4f0d-b4d6-5d694e2522f0/%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA_2023-06-29_%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE_10.07.09.png)

IP 패킷은 위에 그림과 같이 생겼다. 

패킷의 Header에는 출발지와 목적지 IP가 명시되어 있고, Payload에는 실질적인 데이터가 들어있다

**이때, 데이터의 크기가 클 경우 데이터를 작은 패킷으로 나누어 전송한다.**

---

### 📌 IP 패킷 통신

패킷을 생성하고 실제 전송이 시작된다.

데이터는 네트워크를 통해 여러 개의 중간 노드`(서버 컴퓨터)` 를 거쳐 목적지에 도달한다.

**이 때 각 노드는 패킷을 수신하고, 목적지를 확인후 다음 노드로 패킷을 전달한다. `패킷 스위칭 방식이라 불림`**

**이때 어떠한 노드를 거쳐 패킷을 전송할지 정하는 라우팅 알고리즘이 있다.** 

이 알고리즘은 네트워크 상의 다양한 요소를 고려하여 경로를 선택한다.

이러한 과정을 반복하면 최종적으로 목적지에 해당 패킷이 동작한다.

물건이 최종적으로 도착하게 되면 도착지에서 다시 패킷 방식으로 도착여부를 보낸다.

**말이 너무 어렵다. 조금 쉽게 (부산 → 서울) 간의 택배 배송으로 예로 들어보자.**

1. 택배를 보낼때 **운송장**을 붙힌다.  **→ 패킷의 Header**

1. 택배 내부에는 실제로 보내고자 하는 물건이 들어있다 → **패킷의 Payload**

      **만약 보내고자 하는 물건이 너무 클 경우 분해하여 여러개의 박스에 담는다 → 패킷을 쪼개는것과 같다.**

1. 부산에서 서울로 한 번에 보낼 수 있는 방법이 없기에 여러개의 센터를 거친다.
    
    ex) 부산센터 - 대전센터 - 용인센터 - 안양센터 - 서울센터   →   **센터는 노드 역할을 수행**
    

1. 가장 최적의 경로, 교통 혼잡도, 비용, 기타등등.. 요소를 고려하여 최적의 경로를 정한다. → **라우팅 알고리즘** 

1. 물건이 도착하면 인수자가 잘 도착했다는 연락을 회신 → **패킷도착여부 회신**

---

### 📌 IP 통신의 한계

IP 통신은 아래와 같은 단점을 가지며 상위 계층 프로토콜 TCP를 사용하여 해결할 수 있다.

### **비연결성**

IP통신은 패킷을 받을 대상이 없거나, 서비스 불능 상태여도 패킷을 전송한다.

이는 패킷을 전송할때 서버가 어떠한 상태인지를 확인 할 방법이 없기 때문이다.

### **비신뢰성**

1. 패킷이 여러 노드를 거쳐 이동하기에 중간에 어떠한 장애로 유실되어도 클라이언트는 해당 사실을 알 수 없다.
2. 패킷을 잘게 분해해서 보낼때 모든 패킷이 같은 노드를 거치지 않기에 원치 않은 순서로 도착할 수 있다.